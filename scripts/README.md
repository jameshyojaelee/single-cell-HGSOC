# HGSOC Analysis Scripts

This directory contains scripts for processing and analyzing the High-grade Serous Ovarian Cancer (HGSOC) single-cell RNA-seq datasets.

## CellRanger Pipeline

### Main Scripts

- `submit_cellranger_jobs.sh`: Master script that generates and submits individual CellRanger jobs for each sample in the GSE184880 dataset. This script reads sample information from the metadata file, creates a job script for each sample, and submits them to the SLURM scheduler.

- `run_cellranger.sh`: Alternative script for running CellRanger manually on individual samples.

### Generated Job Scripts

- `job_SRRxxxxxxx.sh`: These scripts are automatically generated by `submit_cellranger_jobs.sh` - one for each sample in the dataset. Each job script:
  - Contains SLURM resource allocation parameters (memory, CPUs, time limit)
  - Sets up temporary directories for the FASTQ files
  - Creates symlinks with the required CellRanger naming convention
  - Executes CellRanger with the appropriate parameters for that specific sample
  - Moves the output to the final location
  - Cleans up temporary files

> **Note**: These job scripts should not be edited directly as they are automatically generated. To modify the parameters for all jobs, edit the template in `submit_cellranger_jobs.sh`.

## Data Download Scripts

- `fastq_download.py`/`.sh`: Scripts for downloading FASTQ files for the main dataset
- `fastq_download2.py`/`.sh`: Scripts for downloading additional FASTQ files
- `fastq_download3.py`/`.sh`: Scripts for downloading the remaining FASTQ files

## Analysis Scripts

- `scanpy_analysis.py`: Python script for analyzing single-cell data using the Scanpy package
- `Shah_T.R`: R script for downstream analysis using Seurat and other R packages

## Usage

### Processing Raw Data

1. Download the raw FASTQ files:
   ```bash
   bash fastq_download.sh
   ```

2. Process all samples with CellRanger:
```bash
bash submit_cellranger_jobs.sh
```
   This will create and submit all the job_*.sh scripts to the SLURM scheduler.

3. Monitor job progress:
   ```bash
   squeue -u $USER
   ```

### Running Analysis

After CellRanger processing is complete:

1. Run the Scanpy analysis:
   ```bash
   python scanpy_analysis.py
   ```

2. Run the R-based analysis:
   ```bash
   Rscript Shah_T.R
   ```

## Output

- CellRanger output: `/gpfs/commons/home/jameslee/HGSOC/output/cellranger/`
- Log files: `/gpfs/commons/home/jameslee/HGSOC/output/logs/` 